<h1 class="mb-4">Órdenes de Compra Pendientes</h1>

{{#if ordenes.length}}
<div class="accordion" id="accordionOrdenes">
    {{#each ordenes}}
    <div class="accordion-item admin-card mb-3" style="background-color: var(--color-surface); border-color: var(--color-border);">
        <h2 class="accordion-header">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse{{this.id_orden}}" style="background-color: var(--color-dark-bg); color: var(--color-text-primary); box-shadow: none;">
                <strong>Orden #{{this.id_orden}}</strong>
                <span class="ms-auto" style="color: white;">Fecha: {{this.fecha_creacion}}</span>
            </button>
        </h2>
        <div id="collapse{{this.id_orden}}" class="accordion-collapse collapse" data-bs-parent="#accordionOrdenes">
            <div class="accordion-body">
                <h6 class="mb-3">Productos Solicitados:</h6>
                <!-- Lista de productos de la orden -->
                <ul class="list-group list-group-flush mb-4">
                    {{#each this.detalles}}
                    <li class="list-group-item d-flex justify-content-between align-items-center bg-transparent border-secondary" style="color: black;">
                        {{this.producto_nombre}}
                        <span class="badge bg-primary rounded-pill">Cantidad: {{this.cantidad_solicitada}}</span>
                    </li>
                    {{/each}}
                </ul>
                <div class="d-flex justify-content-between align-items-center">
                    <p class="mb-0">Total Estimado: <strong style="color: var(--color-primary);">${{this.total_estimado}}</strong></p>
                    <form action="/proveedor/orden/enviar" method="POST" onsubmit="return confirm('¿Estás seguro de que ya has despachado esta orden?');">
                        <input type="hidden" name="id_orden" value="{{this.id_orden}}">
                        <button type="submit" class="btn btn-primary"><i class="bi bi-truck me-2"></i>Marcar como Enviada</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    {{/each}}
</div>
{{else}}
<div class="card text-center p-5" style="background-color: var(--color-surface); border-color: var(--color-border);">
    <i class="bi bi-check-circle-fill" style="font-size: 4rem; color: var(--color-primary);"></i>
    <h4 class="mt-3">¡Excelente!</h4>
    <p style="color: var(--color-text-secondary);">No tienes ninguna orden de compra pendiente de despachar.</p>
</div>
{{/if}}
